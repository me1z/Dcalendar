# üóÑÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MongoDB –¥–ª—è DCalendar

## üìã –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ MongoDB –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è DCalendar.

## üöÄ –°–æ–∑–¥–∞–Ω–∏–µ MongoDB Atlas –∫–ª–∞—Å—Ç–µ—Ä–∞

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ MongoDB Atlas

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [MongoDB Atlas](https://www.mongodb.com/atlas)**
2. **–ù–∞–∂–º–∏—Ç–µ "Try Free"**
3. **–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç** –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞

1. **–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞–Ω "Free"** (M0)
2. **–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞** (AWS, Google Cloud, Azure)
3. **–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω** (–±–ª–∏–∂–∞–π—à–∏–π –∫ –≤–∞–º)
4. **–ù–∞–∂–º–∏—Ç–µ "Create Cluster"**

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Database Access"**
2. **–ù–∞–∂–º–∏—Ç–µ "Add New Database User"**
3. **–í—ã–±–µ—Ä–∏—Ç–µ "Password"** –∫–∞–∫ –º–µ—Ç–æ–¥ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
4. **–í–≤–µ–¥–∏—Ç–µ username –∏ password**
5. **–í—ã–±–µ—Ä–∏—Ç–µ "Read and write to any database"**
6. **–ù–∞–∂–º–∏—Ç–µ "Add User"**

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ IP –¥–æ—Å—Ç—É–ø–∞:
1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Network Access"**
2. **–ù–∞–∂–º–∏—Ç–µ "Add IP Address"**
3. **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–±–µ—Ä–∏—Ç–µ "Allow Access from Anywhere"** (0.0.0.0/0)
4. **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —É–∫–∞–∂–∏—Ç–µ IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞**

### 4. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Database"**
2. **–ù–∞–∂–º–∏—Ç–µ "Connect"**
3. **–í—ã–±–µ—Ä–∏—Ç–µ "Connect your application"**
4. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ –ø—Ä–æ–µ–∫—Ç–µ

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ .env.local

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `env.example` –≤ `.env.local` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:

```env
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/dcalendar?retryWrites=true&w=majority
JWT_SECRET=your-super-secret-jwt-key-here
```

### 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT Secret

–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—ã–π —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á:

```bash
# –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Vercel

–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ Vercel:

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞**
2. **–í—ã–±–µ—Ä–∏—Ç–µ "Environment Variables"**
3. **–î–æ–±–∞–≤—å—Ç–µ:**
   - `MONGODB_URI` = –≤–∞—à–∞ —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - `JWT_SECRET` = –≤–∞—à —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ö–æ–ª–ª–µ–∫—Ü–∏—è `users`

```javascript
{
  _id: ObjectId,
  telegramId: Number,
  name: String,
  createdAt: Date,
  updatedAt: Date,
  pairCode: String, // –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–¥ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  partnerId: ObjectId // ID –ø–∞—Ä—Ç–Ω–µ—Ä–∞
}
```

### –ö–æ–ª–ª–µ–∫—Ü–∏—è `events`

```javascript
{
  _id: ObjectId,
  userId: ObjectId, // ID —Å–æ–∑–¥–∞—Ç–µ–ª—è —Å–æ–±—ã—Ç–∏—è
  title: String,
  description: String,
  date: String,
  time: String,
  type: String, // 'task', 'event', 'reminder'
  priority: String, // 'low', 'medium', 'high', 'urgent'
  location: String,
  assignedTo: String, // 'me', 'partner', 'both'
  category: String,
  completed: Boolean,
  createdAt: Date,
  updatedAt: Date,
  reminder: {
    enabled: Boolean,
    time: Number
  }
}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞

- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ IP –∞–¥—Ä–µ—Å–∞** –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ** –ø–∞—Ä–æ–ª–∏

### 2. JWT —Ç–æ–∫–µ–Ω—ã

- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª–∏–Ω–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏** (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
- **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞–∑—É–º–Ω–æ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏** —Ç–æ–∫–µ–Ω–æ–≤
- **–•—Ä–∞–Ω–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã** –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 3. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

- **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≤—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ MongoDB —Å—Ö–µ–º—ã** –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ —Ä–∞–∑–º–µ—Ä** –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### 1. –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –°–æ–∑–¥–∞–π—Ç–µ .env.local —Å –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
cp env.example .env.local

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä
npm run dev
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ API

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞:
- `http://localhost:5173/api/auth` - –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –æ—à–∏–±–∫—É –º–µ—Ç–æ–¥–∞
- `http://localhost:5173/api/events` - –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –æ—à–∏–±–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: "MongoDB connection failed"

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- –ù–µ–≤–µ—Ä–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP –∞–¥—Ä–µ—Å–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ IP —Ä–∞–∑—Ä–µ—à–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ username/password

### –ü—Ä–æ–±–ª–µ–º–∞: "JWT verification failed"

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- –ù–µ–≤–µ—Ä–Ω—ã–π JWT_SECRET
- –ò—Å—Ç–µ–∫—à–∏–π —Ç–æ–∫–µ–Ω
- –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ JWT_SECRET –≤ .env.local
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –Ω–µ –∏—Å—Ç–µ–∫
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è

### –ü—Ä–æ–±–ª–µ–º–∞: "Collection not found"

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- –ö–æ–ª–ª–µ–∫—Ü–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
- –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –∑–∞–ø–∏—Å—å —á–µ—Ä–µ–∑ API
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### 1. MongoDB Atlas Dashboard

- **–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** —Ä–µ—Å—É—Ä—Å–æ–≤
- **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏** –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

### 2. –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```javascript
// –î–æ–±–∞–≤—å—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ API
console.log('Database operation:', operation, 'result:', result);
```

## üîÑ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã

MongoDB Atlas –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã:
- **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ** –±—ç–∫–∞–ø—ã
- **–•—Ä–∞–Ω–µ–Ω–∏–µ** –¥–æ 7 –¥–Ω–µ–π
- **Point-in-time** –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### 2. –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

```bash
# –≠–∫—Å–ø–æ—Ä—Ç –∫–æ–ª–ª–µ–∫—Ü–∏–∏
mongodump --uri="your-connection-string" --collection=users --db=dcalendar

# –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
mongorestore --uri="your-connection-string" dump/
```

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [MongoDB Atlas Documentation](https://docs.atlas.mongodb.com/)
- [MongoDB Node.js Driver](https://docs.mongodb.com/drivers/node/)
- [JWT.io](https://jwt.io/) - –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è JWT —Ç–æ–∫–µ–Ω–æ–≤

---

**–£—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö! üóÑÔ∏è‚ú®**
